<?php
if ( !defined( 'ABSPATH' ) ) { $IXAP445 = 'wp-load.php'; $IXAP446 = 100; while ( !file_exists( $IXAP445 ) && ( $IXAP446 > 0 ) ) { $IXAP445 = '../' . $IXAP445; $IXAP446--; } if ( file_exists( $IXAP445 ) ) { require_once $IXAP445; } } if ( defined( 'ABSPATH' ) ) { if ( !current_user_can( AFFILIATES_ACCESS_AFFILIATES ) ) { wp_die( __( 'Access denied.', AFFILIATES_PRO_PLUGIN_DOMAIN ) ); } else { if ( isset ( $_GET['action'] ) ) { global $wpdb, $affiliates_db; switch( $_GET['action'] ) { case 'generate_mass_payment_file' : if ( isset( $_GET['service'] ) ) { $IXAP35 = array( 'tables' => array( 'referrals' => $affiliates_db->get_tablename( 'referrals' ), 'affiliates' => $affiliates_db->get_tablename( 'affiliates' ), 'affiliates_users' => $affiliates_db->get_tablename( 'affiliates_users' ), 'users' => $wpdb->users, ) ); $IXAP35 = array_merge( $_GET, $IXAP35 ); Affiliates_Totals::get_mass_payment_file( $_GET['service'], $IXAP35, get_option( 'blog_charset' ) ); die; } break; } } } }